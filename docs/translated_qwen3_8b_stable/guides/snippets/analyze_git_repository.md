---
---
layout: docu
redirect_from:
- /docs/guides/snippets/analyze_git_repository
title: åˆ†æ Git ä»“åº“
---

æ‚¨å¯ä»¥ä½¿ç”¨ DuckDB é€šè¿‡ [`git log` å‘½ä»¤](https://git-scm.com/docs/git-log) çš„è¾“å‡ºæ¥åˆ†æ Git æ—¥å¿—ã€‚

## å¯¼å‡º Git æ—¥å¿—

æˆ‘ä»¬é¦–å…ˆé€‰æ‹©ä¸€ä¸ªåœ¨ä»»ä½•æäº¤æ—¥å¿—ï¼ˆä½œè€…åç§°ã€æ¶ˆæ¯ç­‰ï¼‰ä¸­éƒ½ä¸ä¼šå‡ºç°çš„å­—ç¬¦ã€‚
è‡ªä» v1.2.0 ç‰ˆæœ¬èµ·ï¼ŒDuckDB çš„ CSV è¯»å–å™¨æ”¯æŒ [4 å­—èŠ‚åˆ†éš”ç¬¦]({% post_url 2025-02-05-announcing-duckdb-120 %}#csv-features)ï¼Œè¿™ä½¿å¾—ä½¿ç”¨è¡¨æƒ…ç¬¦å·æˆä¸ºå¯èƒ½ï¼ğŸ‰

å°½ç®¡å®ƒåœ¨ [è¡¨æƒ…ç”µå½±](https://www.imdb.com/title/tt4877122/)ï¼ˆIMDb è¯„åˆ†ï¼š3.4ï¼‰ä¸­è¢«æåŠï¼Œ
æˆ‘ä»¬å¯ä»¥å‡è®¾ [æ¼©æ¶¡é±¼è›‹ç³•è¡¨æƒ…ç¬¦å·ï¼ˆğŸ¥ï¼‰](https://emojipedia.org/fish-cake-with-swirl) åœ¨å¤§å¤šæ•° Git æ—¥å¿—ä¸­å¹¶ä¸å¸¸è§ã€‚
å› æ­¤ï¼Œè®©æˆ‘ä»¬å…‹éš† [`duckdb/duckdb` ä»“åº“](https://github.com/duckdb/duckdb)ï¼Œå¹¶æŒ‰ç…§ä»¥ä¸‹æ–¹å¼å¯¼å‡ºå…¶æ—¥å¿—ï¼š

```bash
git log --date=iso-strict --pretty=format:%adğŸ¥%hğŸ¥%anğŸ¥%s > git-log.csv
```

ç”Ÿæˆçš„æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š

```text
2025-02-25T18:12:54+01:00ğŸ¥d608a31e13ğŸ¥MarkğŸ¥MAIN_BRANCH_VERSIONING: Adopt also for Python build and amalgamation (#16400)
2025-02-25T15:05:56+01:00ğŸ¥920b39ad96ğŸ¥MarkğŸ¥Read support for Parquet Float16 (#16395)
2025-02-25T13:43:52+01:00ğŸ¥61f55734b9ğŸ¥Carlo PiovesanğŸ¥MAIN_BRANCH_VERSIONING: Adopt also for Python build and amalgamation
2025-02-25T12:35:28+01:00ğŸ¥87eff7ebd3ğŸ¥MarkğŸ¥Fix issue #16377 (#16391)
2025-02-25T10:33:49+01:00ğŸ¥35af26476eğŸ¥Hannes MÃ¼hleisenğŸ¥Read support for Parquet Float16
```

## å°† Git æ—¥å¿—åŠ è½½åˆ° DuckDB

å¯åŠ¨ DuckDB å¹¶å°†æ—¥å¿—ä½œä¸º <s>CSV</s> ğŸ¥SV è¯»å–ï¼š

```sql
CREATE TABLE commits AS 
    FROM read_csv(
            'git-log.csv',
            delim = 'ğŸ¥',
            header = false,
            column_names = ['timestamp', 'hash', 'author', 'message']
        );
```

è¿™å°†å¾—åˆ°ä¸€ä¸ªæ¼‚äº®çš„ DuckDB è¡¨ï¼š

```sql
FROM commits
LIMIT 5;
```

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      timestamp      â”‚    hash    â”‚      author      â”‚                                    message                                    â”‚
â”‚      timestamp      â”‚  varchar   â”‚     varchar      â”‚                                    varchar                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2025-02-25 17:12:54 â”‚ d608a31e13 â”‚ Mark             â”‚ MAIN_BRANCH_VERSIONING: Adopt also for Python build and amalgamation (#16400) â”‚
â”‚ 2025-02-25 14:05:56 â”‚ 920b39ad96 â”‚ Mark             â”‚ Read support for Parquet Float16 (#16395)                                     â”‚
â”‚ 2025-02-25 12:43:52 â”‚ 61f55734b9 â”‚ Carlo Piovesan   â”‚ MAIN_BRANCH_VERSIONING: Adopt also for Python build and amalgamation          â”‚
â”‚ 2025-02-25 11:35:28 â”‚ 87eff7ebd3 â”‚ Mark             â”‚ Fix issue #16377 (#16391)                                                     â”‚
â”‚ 2025-02-25 09:33:49 â”‚ 35af26476e â”‚ Hannes MÃ¼hleisen â”‚ Read support for Parquet Float16                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## åˆ†ææ—¥å¿—

æˆ‘ä»¬å¯ä»¥åƒåˆ†æå…¶ä»–è¡¨ä¸€æ ·åˆ†ææ­¤è¡¨ã€‚

### å¸¸è§ä¸»é¢˜

è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„é—®é¢˜å¼€å§‹ï¼šåœ¨æäº¤æ¶ˆæ¯ä¸­ï¼Œå“ªä¸ªä¸»é¢˜è¢«æåŠæœ€å¤šï¼šCIã€CLI æˆ– Pythonï¼Ÿ

```sql
SELECT
    message.lower().regexp_extract('\b(ci|cli|python)\b') AS topic,
    count(*) AS num_commits
FROM commits
WHERE topic <> ''
GROUP BY ALL
ORDER BY num_commits DESC;
```

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  topic  â”‚ num_commits â”‚
â”‚ varchar â”‚    int64    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ci      â”‚         828 â”‚
â”‚ python  â”‚         666 â”‚
â”‚ cli     â”‚          49 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

åœ¨è¿™ä¸‰ä¸ªä¸»é¢˜ä¸­ï¼Œä¸æŒç»­é›†æˆç›¸å…³çš„æäº¤åœ¨æ—¥å¿—ä¸­å ä¸»å¯¼åœ°ä½ï¼

æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æŸ¥çœ‹æäº¤æ¶ˆæ¯ä¸­çš„æ‰€æœ‰å•è¯è¿›è¡Œæ›´æ·±å…¥çš„åˆ†æã€‚
ä¸ºæ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¹æ¶ˆæ¯è¿›è¡Œåˆ†è¯ï¼š

```sql
CREATE TABLE words AS
    SELECT unnest(
        message
            .lower()
            .regexp_replace('\W', ' ')
            .trim(' ')
            .string_split_regex('\W')
        ) AS word    
FROM commits;
```

ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨é¢„å®šä¹‰çš„åˆ—è¡¨åˆ é™¤åœç”¨è¯ï¼š

```sql
CREATE TABLE stopwords AS
    SELECT unnest(['a', 'about', 'above', 'after', 'again', 'against', 'all', 'am', 'an', 'and', 'any', 'are', 'as', 'at', 'be', 'because', 'been', 'before', 'being', 'below', 'between', 'both', 'but', 'by', 'can', 'did', 'do', 'does', 'doing', 'don', 'down', 'during', 'each', 'few', 'for', 'from', 'further', 'had', 'has', 'have', 'having', 'he', 'her', 'here', 'hers', 'herself', 'him', 'himself', 'his', 'how', 'i', 'if', 'in', 'into', 'is', 'it', 'its', 'itself', 'just', 'me', 'more', 'most', 'my', 'myself', 'no', 'nor', 'not', 'now', 'of', 'off', 'on', 'once', 'only', 'or', 'other', 'our', 'ours', 'ourselves', 'out', 'over', 'own', 's', 'same', 'she', 'should', 'so', 'some', 'such', 't', 'than', 'that', 'the', 'their', 'theirs', 'them', 'themselves', 'then', 'there', 'these', 'they', 'this', 'those', 'through', 'to', 'too', 'under', 'until', 'up', 'very', 'was', 'we', 'were', 'what', 'when', 'where', 'which', 'while', 'who', 'whom', 'why', 'will', 'with', 'you', 'your', 'yours', 'yourself', 'yourselves']) AS word;

CREATE OR REPLACE TABLE words AS
    FROM words
    NATURAL ANTI JOIN stopwords
    WHERE word != '';
```

> æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨äº† `NATURAL ANTI JOIN` å­å¥ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿä¼˜é›…åœ°è¿‡æ»¤æ‰åœ¨ `stopwords` è¡¨ä¸­å‡ºç°çš„å€¼ã€‚

æœ€åï¼Œæˆ‘ä»¬é€‰æ‹©å‰ 20 ä¸ªæœ€å¸¸è§çš„å•è¯ã€‚

```sql
SELECT word, count(*) AS count FROM words
GROUP BY ALL
ORDER BY count DESC
LIMIT 20;
```

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚    w     â”‚ count â”‚
â”‚ varchar  â”‚ int64 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ merge    â”‚ 12550 â”‚
â”‚ fix      â”‚  6402 â”‚
â”‚ branch   â”‚  6005 â”‚
â”‚ pull     â”‚  5950 â”‚
â”‚ request  â”‚  5945 â”‚
â”‚ add      â”‚  5687 â”‚
â”‚ test     â”‚  3801 â”‚
â”‚ master   â”‚  3289 â”‚
â”‚ tests    â”‚  2339 â”‚
â”‚ issue    â”‚  1971 â”‚
â”‚ main     â”‚  1935 â”‚
â”‚ remove   â”‚  1884 â”‚
â”‚ format   â”‚  1819 â”‚
â”‚ duckdb   â”‚  1710 â”‚
â”‚ use      â”‚  1442 â”‚
â”‚ mytherin â”‚  1410 â”‚
â”‚ fixes    â”‚  1333 â”‚
â”‚ hawkfish â”‚  1147 â”‚
â”‚ feature  â”‚  1139 â”‚
â”‚ function â”‚  1088 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     20 rows      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

æ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œæœ‰å¾ˆå¤š Git æœ¯è¯­ï¼ˆ`merge`, `branch`, `pull` ç­‰ï¼‰ï¼Œæ¥ç€æ˜¯ä¸å¼€å‘ç›¸å…³çš„æœ¯è¯­ï¼ˆ`fix`, `test`/`tests`, `issue`, `format`ï¼‰ã€‚
æˆ‘ä»¬è¿˜çœ‹åˆ°ä¸€äº›å¼€å‘è€…çš„è´¦æˆ·åï¼ˆ[`mytherin`](https://github.com/Mytherin), [`hawkfish`](https://github.com/hawkfish)ï¼‰ï¼Œè¿™å¾ˆå¯èƒ½æ˜¯ç”±äºåˆå¹¶ pull è¯·æ±‚çš„æäº¤ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œ[â€Merge pull request #13776 from Mytherin/expressiondepthâ€](https://github.com/duckdb/duckdb/commit/4d18b9d05caf88f0420dbdbe03d35a0faabf4aa7)ï¼‰ã€‚
æœ€åï¼Œæˆ‘ä»¬è¿˜çœ‹åˆ°ä¸€äº›ä¸ DuckDB ç›¸å…³çš„æœ¯è¯­ï¼Œå¦‚ `duckdb`ï¼ˆéœ‡æƒŠï¼ï¼‰å’Œ `function`ã€‚

### å¯è§†åŒ–æäº¤æ•°é‡

è®©æˆ‘ä»¬å¯è§†åŒ–æ¯å¹´çš„æäº¤æ•°é‡ï¼š

```sql
SELECT
    year(timestamp) AS year,
    count(*) AS num_commits,
    num_commits.bar(0, 20_000) AS num_commits_viz
FROM commits
GROUP BY ALL
ORDER BY ALL;
```

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ year  â”‚ num_commits â”‚                                 num_commits_viz                                  â”‚
â”‚ int64 â”‚    int64    â”‚                                     varchar                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2018 â”‚         870 â”‚ â–ˆâ–ˆâ–ˆâ–                                                                             â”‚
â”‚  2019 â”‚        1621 â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–                                                                          â”‚
â”‚  2020 â”‚        3484 â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰                                                                   â”‚
â”‚  2021 â”‚        6488 â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‰                                                       â”‚
â”‚  2022 â”‚        9817 â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–                                         â”‚
â”‚  2023 â”‚       14585 â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–                      â”‚
â”‚  2024 â”‚       15949 â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Š                 â”‚
â”‚  2025 â”‚        1788 â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

æˆ‘ä»¬çœ‹åˆ°æäº¤æ•°é‡é€å¹´ç¨³æ­¥å¢é•¿â€”â€”
ç‰¹åˆ«æ˜¯è€ƒè™‘åˆ° DuckDB çš„è®¸å¤šåŠŸèƒ½å’Œå®¢æˆ·ç«¯ï¼Œæœ€åˆæ˜¯ä¸»ä»“åº“çš„ä¸€éƒ¨åˆ†ï¼Œç°åœ¨ç”±å•ç‹¬çš„ä»“åº“ç»´æŠ¤
ï¼ˆä¾‹å¦‚ï¼Œ[Java](https://github.com/duckdb/duckdb-java), [R](https://github.com/duckdb/duckdb-r)ï¼‰ã€‚

å¿«ä¹é»‘å®¢ï¼